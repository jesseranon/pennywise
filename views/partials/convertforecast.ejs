<% const forecastAction = forecast.accountingType %>
<% let accounts = user.accounts %>
<% if (forecastAction === 'debit') accounts = accounts.filter(a => a.balanceType === 'asset') %>

<div class="container">
  <div class="row justify-content-center mt-5">
    <p>
      Convert forecast to transaction <span id="account-data" data-account-sub-type="<%= account.subType %>"><%= account.name %></span>
    </p>
    <form action="" method="post">
      <!-- Account To Post To -->
      <p>
        <label for="account">Account</label>
        <select name="account" id="account">
          <% for (let i = 0; i < accounts.length; i ++) { %>
            <option value="<%= accounts[i]._id %>"><%= accounts[i].name %> | <%= user.currency %><%= accounts[i].currentBalance %></option>
          <% } %>
        </select>
      </p>

      <!-- Type -->
      <p>
        <label for="accountingType">What are you doing with this transaction?</label>
        <select name="accountingType" id="accountingType">
          <option value="debits">
            <%= transactionDebit %>
          </option>
          <option value="credits">
            <%= transactionCredit %>
          </option>
        </select>
      </p>
      
      
      <!-- Transaction Amount -->
      <p>
        <label for="amount">
          <% forecastAction === 'debit' ? 'Getting paid' : 'Spending' %> how much?
        </label>
        <input type="number" step="0.01" min="0" name="amount" id="amount" autocomplete="off" value="<% forecast.amount %>">
      </p>
      
      <!-- Category -->
      <p>
        <label for="category">
          Category: 
        </label>
        <input type="text" name="category" id="category" list="categories" autocomplete="off" value="<%= forecast.category.name %>">
        <datalist id="categories">
          <% if (user.categories.length > 0) { %>
            <% for (let i = 0; i < user.categories.length; i++) { %>
              <option value="<%= user.categories[i].name %>">
            <% } %>
          <% } %>
        </datalist>
      </p>

      <%- include('formsubmitcancelbuttons') -%>
    </form>
  </div>
</div>